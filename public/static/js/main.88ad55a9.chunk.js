(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,a){e.exports=a(73)},48:function(e,t,a){},71:function(e,t,a){},72:function(e,t){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(37),s=a.n(o),c=a(7),l=a(2),i=a(3),u=a(5),m=a(4),p=(a(48),a(6)),h=a(8),d=a.n(h),g=new(function(){function e(){Object(l.a)(this,e),this.auth=d.a.create({baseURL:"https://tippo-app.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/signup",{username:t,password:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/login",{username:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),f=r.a.createContext(),v=f.Consumer,E=f.Provider,b=function(e){return function(t){Object(u.a)(n,t);var a=Object(m.a)(n);function n(){return Object(l.a)(this,n),a.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(v,null,(function(a){var n=a.login,o=a.signup,s=a.user,c=a.logout,l=a.isLoggedin;return r.a.createElement(e,Object.assign({login:n,signup:o,user:s,logout:c,isLoggedin:l},t.props))}))}}]),n}(r.a.Component)},j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedin:!1,user:null,isLoading:!0},e.signup=function(t){var a=t.username,n=t.password;g.signup({username:a,password:n}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(t){var a=t.response;return e.setState({message:a.data.statusMessage})}))},e.login=function(t){var a=t.username,n=t.password;g.login({username:a,password:n}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(e){return console.log(e)}))},e.logout=function(){g.logout().then((function(){return e.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user,o=this.login,s=this.logout,c=this.signup;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(E,{value:{isLoggedin:a,user:n,login:o,logout:s,signup:c}},this.props.children)}}]),a}(r.a.Component),O=b(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logout,n=e.isLoggedin;return r.a.createElement("nav",{className:"navbar"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"logo",src:"./logo.png"}),r.a.createElement("p",{className:"navbar-user"},t.username),r.a.createElement("button",{className:"navbar-button",onClick:a},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/login"},r.a.createElement("button",{className:"navbar-button"},"Login")),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/signup"},r.a.createElement("button",{className:"navbar-button"},"Sign Up"))))}}]),a}(n.Component)),N=a(12),y=b(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.signup({username:n,password:r})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(N.a)({},n,r))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"signup"},r.a.createElement("form",{className:"form",onSubmit:this.handleFormSubmit},r.a.createElement("input",{className:"inputLoginSignup",type:"text",name:"username",value:t,onChange:this.handleChange,placeholder:"Username"}),r.a.createElement("input",{className:"inputLoginSignup",type:"password",name:"password",value:a,onChange:this.handleChange,placeholder:"Password"}),r.a.createElement("input",{className:"input-in",type:"submit",value:"Signup"})),r.a.createElement("p",{className:"already"},"Already have account?"),r.a.createElement(c.b,{to:"/login"}," Login"),r.a.createElement("div",{className:"logoPrincipal"},r.a.createElement("img",{src:"logo.png"})))}}]),a}(n.Component)),w=b(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.login({username:n,password:r})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(N.a)({},n,r))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"login"},r.a.createElement("form",{className:"form",onSubmit:this.handleFormSubmit},r.a.createElement("input",{className:"inputLoginSignup",type:"text",name:"username",value:t,onChange:this.handleChange,placeholder:"Username"}),r.a.createElement("input",{className:"inputLoginSignup",type:"password",name:"password",value:a,onChange:this.handleChange,placeholder:"Password"}),r.a.createElement("input",{className:"input-in",type:"submit",value:"Login"})),r.a.createElement("div",{className:"logoPrincipal"},r.a.createElement("img",{src:"logo.png"})))}}]),a}(n.Component)),C=b(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",this.props.user.username))}}]),a}(n.Component)),S=a(22);var k=b((function(e){var t=e.component,a=e.isLoggedin,n=Object(S.a)(e,["component","isLoggedin"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(p.a,{to:"/"}):r.a.createElement(t,e)}}))}));var L=b((function(e){var t=e.component,a=e.isLoggedin,n=Object(S.a)(e,["component","isLoggedin"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))})),P=b(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.user,e.logout,e.isLoggedin);return r.a.createElement("nav",{className:"menu"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/",id:"home-btn"},r.a.createElement("img",{className:"icon",src:"./casa.png"})),r.a.createElement(c.b,{to:"/createPost",id:"home-btn"},r.a.createElement("img",{className:"icon",src:"./camarawhite.png"})),r.a.createElement(c.b,{to:"/myprofile",id:"home-btn"},r.a.createElement("img",{className:"icon",src:"./herramientas-white.png"})),r.a.createElement(c.b,{to:"/search"},r.a.createElement("img",{className:"icon",src:"./buscar.png"}))):r.a.createElement(r.a.Fragment,null))}}]),a}(n.Component)),_=(a(71),a(86)),F=(a(72),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={posts:[]},e.componentDidMount=function(){d.a.get("".concat("https://tippo-app.herokuapp.com","/home/lastPost"),{withCredentials:!0}).then((function(t){e.setState({posts:t.data}),console.log(t)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"posts-profile"},this.state.posts[0]&&this.state.posts.map((function(e){return r.a.createElement("div",{class:"post"},r.a.createElement("div",{className:"post__header"},r.a.createElement(_.a,{className:"post__avatar",alt:e.user.username,src:e.user.profilePhoto}),r.a.createElement(c.b,{class:"link-name",to:"/profile/".concat(e.user._id)},e.user.username)),r.a.createElement("img",{className:"post__image",src:e.postPhoto}),r.a.createElement("p",null,e.postDescription),r.a.createElement("h4",{className:"post__text"},r.a.createElement("strong",null,e.username),e.comment))}))))}}]),a}(n.Component)),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",user:null},e.getUser=function(t){d.a.get("".concat("https://tippo-app.herokuapp.com","/search?username=").concat(t)).then((function(t){var a=t.data;e.setState({user:a[0]}),console.log("Data has been received!!")})).catch((function(e){console.log(e)}))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(N.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),e.getUser(e.state.username)},e}return Object(i.a)(a,[{key:"render",value:function(){return console.log("State: ",this.state),r.a.createElement("div",{className:"search"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement("button",{class:"search-button"},"Search")),r.a.createElement("div",null,this.state.user?r.a.createElement("div",null,r.a.createElement(c.b,{className:"link-name",to:"/profile/".concat(this.state.user._id)},this.state.user.username),r.a.createElement("image",{src:this.state.user.profilePhoto}," ")):null))}}]),a}(n.Component),x=a(41),U=d.a.create({baseURL:"https://tippo-app.herokuapp.com"}),A=function(e){throw e},M=Object(N.a)({service:U,handleUpload:function(e){return U.post("/upload",e).then((function(e){return e.data})).catch(A)},handleUploadProfile:function(e){return U.post("/uploadProfile",e).then((function(e){return e.data})).catch(A)},saveNewThing:function(e){return U.post("/post/publish",e).then((function(e){return e.data})).catch(A)}},"saveNewThing",(function(e){return U.post("/profile/edit",e).then((function(e){return e.data})).catch(A)})),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",description:"",link:"",profilePhoto:"",mail:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(N.a)({},n,r))},e.handleSubmit=function(t){d.a.post("".concat("https://tippo-app.herokuapp.com","/profile/edit"),e.state,{withCredentials:!0}).then((function(t){e.props.closeForm()})).catch((function(e){console.log(e)}))},e.handleFileUpload=function(t){console.log("el archivo que se subira es:",t.target.files[0]);var a=new FormData;a.append("profilePhoto",t.target.files[0]),M.handleUploadProfile(a).then((function(t){console.log("response is: ",t),e.setState({profilePhoto:t.secure_url})})).catch((function(e){console.log("Error uploading the file: ",e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({username:this.props.user.username,description:this.props.user.description,link:this.props.user.link,profilePhoto:this.props.user.profilePhoto,mail:this.props.user.mail})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-edit"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-components"},r.a.createElement("label",null,"username"),r.a.createElement("input",{className:"input-form",value:this.state.username,name:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"form-components"},r.a.createElement("label",null,"description"),r.a.createElement("input",{className:"input-form",value:this.state.description,name:"description",onChange:this.handleChange})),r.a.createElement("div",{className:"form-components"},r.a.createElement("label",null,"link"),r.a.createElement("input",{className:"input-form",value:this.state.link,name:"link",onChange:this.handleChange})),r.a.createElement("div",{className:"form-components"},r.a.createElement("input",{className:"input-in",type:"file",onChange:function(t){return e.handleFileUpload(t)}})),r.a.createElement("div",{className:"form-components"},r.a.createElement("label",null,"mail"),r.a.createElement("input",{className:"input-form",value:this.state.mail,name:"mail",onChange:this.handleChange})),r.a.createElement("div",{className:"form-components"},r.a.createElement("button",null,"save"))))}}]),a}(n.Component),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{},showEditForm:!1,posts:[]},e.componentDidMount=function(){d.a.get("".concat("https://tippo-app.herokuapp.com","/profile/myprofile"),{withCredentials:!0}).then((function(t){e.setState({posts:t.data.post,user:t.data})})).catch((function(e){console.log(e)}))},e.toggleEdit=function(){var t=!e.state.showEditForm;e.setState({showEditForm:t})},e.deletePost=function(t,a){d.a.delete("".concat("https://tippo-app.herokuapp.com","/post/delete/").concat(t),{withCredentials:!0}).then((function(t){var n=Object(x.a)(e.state.posts);n.splice(a,1),e.setState({posts:n})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;console.log(this.state);var t=this.state,a=t.posts,n=t.user;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{id:"edit-form"}),r.a.createElement("p",null,n.username),r.a.createElement("p",null,n.description),r.a.createElement("p",null,n.link),r.a.createElement("p",null,n.mail),this.state.showEditForm?r.a.createElement(q,{user:n,closeForm:this.toggleEdit}):r.a.createElement("button",{className:"input-in",onClick:this.toggleEdit},"Edit"),r.a.createElement("div",{className:"posts-profile"},n.post?a.map((function(t,a){return r.a.createElement("div",{className:"post",key:a},r.a.createElement("div",{className:"post__header"},r.a.createElement(_.a,{className:"post__avatar",alt:n.username,src:n.profilePhoto}),r.a.createElement("h3",null,n.username)),r.a.createElement("img",{className:"post__image",src:t.postPhoto}),r.a.createElement("p",null,t.postDescription),r.a.createElement("h4",{className:"post__text"},r.a.createElement("strong",null,n.username),n.comment),r.a.createElement("button",{className:"delete",onClick:function(){return e.deletePost(t._id,a)}},"X"))})):null))}}]),a}(n.Component),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{}},e.componentDidMount=function(){d.a.get("".concat("https://tippo-app.herokuapp.com","/profile/users/").concat(e.props.match.params.id),{withCredentials:!0}).then((function(t){e.setState({user:t.data})})).catch((function(e){console.log(e)}))},e.toggleEdit=function(){var t=!e.state.showEditForm;e.setState({showEditForm:t})},e}return Object(i.a)(a,[{key:"render",value:function(){console.log(this.state);var e=this.state.user;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{id:"edit-form"}),r.a.createElement("p",null,e.username),r.a.createElement("p",null,e.description),r.a.createElement("p",null,e.link),r.a.createElement("p",null,e.mail),r.a.createElement("div",{className:"posts-profile"},e.post?e.post.map((function(t){return r.a.createElement("div",{className:"post"},r.a.createElement("div",{className:"post__header"},r.a.createElement(_.a,{className:"post__avatar",alt:e.username,src:"/static/images/avatar/1.jpg"}),r.a.createElement("h3",null,e.username)),r.a.createElement("img",{className:"post__image",src:t.postPhoto}),r.a.createElement("p",null,t.postDescription),r.a.createElement("h4",{className:"post__text"},r.a.createElement("strong",null,e.username),e.comment))})):null))}}]),a}(n.Component),T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=n.state.postPhoto,a=n.state.postDescription;d.a.post("".concat("https://tippo-app.herokuapp.com","/post/publish"),{postPhoto:t,postDescription:a},{withCredentials:!0}).then((function(e){console.log(e),n.props.history.push("/myprofile")})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(N.a)({},a,r))},n.handleFileUpload=function(e){console.log("el archivo que se subira es:",e.target.files[0]);var t=new FormData;t.append("postPhoto",e.target.files[0]),M.handleUpload(t).then((function(e){console.log("response is: ",e),n.setState({postPhoto:e.secure_url})})).catch((function(e){console.log("Error uploading the file: ",e)}))},n.state={postPhoto:"",postDescription:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return console.log("State: ",this.state),r.a.createElement("div",{className:""},r.a.createElement("form",{className:"",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"createPost"},r.a.createElement("input",{type:"text",name:"postDescription",value:this.state.postDescription,onChange:function(t){return e.handleChange(t)},placeholder:"Description"}),r.a.createElement("input",{class:"input-in",type:"file",onChange:function(t){return e.handleFileUpload(t)}}),r.a.createElement("input",{class:"input-in",type:"submit",value:"Submit"}))))}}]),a}(n.Component),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(j,null,r.a.createElement("div",{className:"container"},r.a.createElement(O,null),r.a.createElement(p.d,null,r.a.createElement(k,{exact:!0,path:"/signup",component:y}),r.a.createElement(k,{exact:!0,path:"/login",component:w}),r.a.createElement(L,{exact:!0,path:"/private",component:C}),r.a.createElement(L,{exact:!0,path:"/",component:F}),r.a.createElement(L,{exact:!0,path:"/search",component:D}),r.a.createElement(L,{exact:!0,path:"/MyProfile",component:J}),r.a.createElement(L,{exact:!0,path:"/profile/:id",component:R}),r.a.createElement(L,{exact:!0,path:"/createpost",component:T})),r.a.createElement(P,null)))}}]),a}(n.Component);s.a.render(r.a.createElement(c.a,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.88ad55a9.chunk.js.map